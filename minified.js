javascript:!function(){async function e(e){let t=function e(t){try{let n=new URL(t),{searchParams:l}=n,a=function e(t){let{pathname:n,hostname:l,searchParams:a,href:i}=t,r;try{let o=n.split("/").filter(Boolean),u=o[0];l.includes("youtube.com")?"shorts"===u||"embed"===u?r=o[1]:"watch"===u&&(r=a.get("v")):l.includes("youtu.be")&&(r=u)}catch{r=i?.match(/^.*(?:youtu\.be\/|v\/|u\/\w\/|embed\/|shorts\/|watch\?v=|&v=)([^#&?/]*[^\/#&?])/)?.[1]}return r}(n);if(null!=a){let i=l.get("t");if(null!=i){let r=+i||String(i).match(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?/)?.map((e,t,n)=>(+e||0)*60**(n.length-1-t)).reduce((e,t)=>e+t);l.set("start",r)}return l.delete("t"),l.delete("v"),n.id=a,n.hostname="www.youtube-nocookie.com",n.pathname="/embed/"+a,n.protocol="https:",n}}catch{}}(e);if(!(t instanceof URL))return;let{href:l,id:a}=t,i=window.open("","_blank"),r=i?.document;if(null!=r){let o=r.body;r.title="YouTube";let u=await (await fetch("https://noembed.com/embed?url="+encodeURIComponent(e))).json(),s=r.createElement("button");s.textContent="View Thumbnail",s.addEventListener("click",()=>window.open(u?.thumbnail_url,null,`width=${u.thumbnail_width}, height=${u.thumbnail_height}`));let c=r.createElement("div");c.width=300,c.height=300,Object.assign(c.style,{overflow:"auto",resize:"both"});let m=r.createElement("iframe");m.src=l,m.allowFullscreen=!0,Object.assign(m.style,{width:"100%",height:"100%"}),c.appendChild(m);let p,h;async function d(){if(h)return;h=!0;let e=`https://www.googleapis.com/youtube/v3/commentThreads?part=snippet,replies&videoId=${a}&key=AIzaSyAfZTjnRADIeEjoNVZgxMZtD706by1wOmc`;null!=p&&(e+=`&pageToken=${p}`);let t=await (await fetch(e)).json();if(p===t?.nextPageToken){h=!0;return}return p=t?.nextPageToken,h=!1,t}let f=r.createElement("div");o.append(s,r.createElement("br"),c,r.createElement("br"),f),n(await d(),f),i.addEventListener("scroll",async function(){i.innerHeight+i.pageYOffset>=o.offsetHeight-500&&n(await d(),f)})}}let t=e=>e.items.map(({snippet:{topLevelComment:{snippet:e}},replies:t})=>({author:e.authorDisplayName,pfp:e.authorProfileImageUrl,likes:e.likeCount,text:e.textDisplay,replies:t?.comments?.map(({snippet:e})=>({author:e.authorDisplayName,pfp:e.authorProfileImageUrl,likes:e.likeCount,text:e.textDisplay}))||[]}));function n(e,n){if(null==e||null==n)return;e=t(e);let l=n.ownerDocument;function a({pfp:e,author:t,likes:n,text:a},i=!1){let r=i?24:32,o=l.createElement("div"),u=l.createElement("img");u.src=e,u.width=r,u.height=r;let s=l.createElement("b");s.textContent=` ${t} `;let c=l.createElement("span");c.textContent=` | üëç ${n} `;let m=l.createElement("p");return m.innerHTML=a,o.append(u,s,c,m),o}for(let i of e){let r=a(i),o=i?.replies,u=o?.length;if(null!=u){let s=l.createElement("details"),c=l.createElement("summary");for(let m of(c.textContent=u+(u<=1?" reply":" replies"),s.appendChild(c),o))s.appendChild(a(m,!0));r.appendChild(s)}n.append(r,l.createElement("hr"))}return n}e(prompt("Enter your YouTube video URL:"))}();
